# 가상 DOM(Virtual Document Object Model)

## 가상 DOM이란?

> HTML 문서를 객체 구조로 표현한 DOM에 수정사항을 반영하기 위해 직접 조작할 경우, 속도 및 성능상의 문제가 발생할 수 있다. 이를 해결하기 위해 **브라우저의 실제 DOM과 비슷한 가상의 구조를 메모리 상에 객체 형태로 만들어, 변경사항만을 계산하는 방식으로 렌더링을 최적화**하는데, 이것을 가상 DOM이라고 한다.

## React 가상 DOM 작동 흐름

### 1️⃣ Initial Rendering (최초 렌더링)

- React가 컴포넌트를 기반으로 최초 가상 DOM을 만든다.
- 해당 가상 DOM을 실제 브라우저 DOM에 마운트한다.

### 2️⃣ State 및 Props 변경

- 사용자의 행동이나 데이터의 변화로 state 혹은 props 값이 변경된다.
- 변경된 state, props 값을 기준으로 React는 새로운 가상 DOM 트리를 생성한다.

### 3️⃣ Diffing (변경사항 찾기)

- React가 Diff 알고리즘을 통해 기존의 가상 DOM과 새롭게 생성된 가상 DOM을 비교한다.
  - 같은 노드 레벨에서만 비교하고, Key를 사용해 빠르게 비교한다.
  - 노드의 타입이 다를 경우에는 그 즉시 교체한다.
- 어떤 노드가 변경되었는지, 새롭게 추가하거나 삭제할 노드는 어떤 것인지 계산한다.

### 4️⃣ Reconciliation (조정)

- 바뀐 부분만을 실제 브라우저 DOM에 적용한다.

### 5️⃣ Update (업데이트)

- 최종적으로 실제 브라우저 화면이 업데이트된다.

---

## 관련 개념

- React Fiber
